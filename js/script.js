"use strict";function createCookie(e,t,o){if(o){var r=new Date;r.setTime(r.getTime()+24*o*60*60*1e3);n="; expires="+r.toGMTString()}else var n="";document.cookie=e+"="+t+n+"; path=/"}function readCookie(e){return(e=new RegExp("(?:^|;\\s*)"+(""+e).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)").exec(document.cookie))&&e[1]}function eraseCookie(e){createCookie(e,"",-1)}function getWeatherColor(e){var t={};return 30<=e?t={main:"#A50021",support:"#fff"}:25<=e&&e<30?t={main:"#D82632",support:"#fff"}:20<=e&&e<25?t={main:"#F76D5E",support:"#242442"}:15<=e&&e<20?t={main:"#FFAD72",support:"#00365c"}:10<=e&&e<15?t={main:"#FFE099",support:"#001F66"}:5<=e&&e<10?t={main:"#FFFFBF",support:"#000040"}:0<=e&&e<5?t={main:"#E0FFFF",support:"#1F0000"}:-5<=e&&e<0?t={main:"#AAF7FF",support:"#1F0000"}:-10<=e&&e<-5?t={main:"#72D8FF",support:"#1F0000"}:-15<=e&&e<-10?t={main:"#3FA0FF",support:"#1F0000"}:-20<=e&&e<-15&&(t={main:"#264CFF",support:"#fcc"}),t}function getWeatherImage(e,t){var o=void 0,r={},n={flurries:{author:"Frida",URL:"https://flic.kr/p/k7zUGc",license:"CC BY-NC 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc/2.0"},snow:{author:"FHKE",URL:"https://flic.kr/p/7AVLQR",license:"CC BY-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-sa/2.0"},storm:{author:"Kuster & Wildhaber Photography",URL:"https://flic.kr/p/cESNRS",license:"CC BY-ND 2.0",licenseURL:"https://creativecommons.org/licenses/by-nd/2.0"},fog:{author:"Martin Fisch",URL:"https://flic.kr/p/dkqP1t",license:"CC BY-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-sa/2.0"},hazy:{author:"pnwbot",URL:"https://flic.kr/p/pusoD1",license:"CC BY-NC-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc-sa/2.0"},rain:{author:"Gabriele Diwald",URL:"https://flic.kr/p/dfkuTL",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"},sunny:{winter:{author:"bfatphoto",URL:"https://flic.kr/p/RHwJiG",license:"CC BY-NC-ND 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc-nd/2.0"},spring:{author:"Stanley Zimny",URL:"https://flic.kr/p/oavqBk",license:"CC BY-NC 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc/2.0"},summer:{author:"Chris",URL:"https://flic.kr/p/fgLTUU",license:"CC BY-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-sa/2.0"},fall:{author:"Jorge Franganillo",URL:"https://flic.kr/p/i28UqP",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"}},cloudy:{summer:{author:"Kay Gaensler",URL:"https://flic.kr/p/cScQxy",license:"CC BY-NC-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc-sa/2.0"},winter:{author:"Peter Toporowski",URL:"https://flic.kr/p/RDW4Z1",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"}},partlysunny:{winter:{author:"GÃ©rald Laik",URL:"https://flic.kr/p/RzuZS7",license:"CC BY-NC-ND 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc-nd/2.0"},spring:{author:"Graham Haley",URL:"https://flic.kr/p/UtjTDm",license:"CC BY-SA 2.0",licenseURL:"https://creativecommons.org/licenses/by-sa/2.0"},summer:{author:"Nicolas Raymond",URL:"http://freestock.ca/skies_clouds_g61-coastal_clouds__hdr_p1879.html",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"}},mostlysunny:{winter:{author:"Adam Tas",URL:"https://flic.kr/p/R33zcf",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"},spring:{author:"Jim Choate",URL:"https://flic.kr/p/SbmJj2",license:"CC BY-NC-ND 2.0",licenseURL:"https://creativecommons.org/licenses/by-nc-nd/2.0"},summer:{author:"Nicolas Raymond",URL:"http://freestock.ca/canada_g92-beaver_brook_scenery__hdr_p804.html",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"},fall:{author:"Belinda Church",URL:"https://flic.kr/p/qb4cbs",license:"CC BY 2.0",licenseURL:"https://creativecommons.org/licenses/by/2.0"}}};switch(e){case"chanceflurries":case"chancesleet":case"flurries":case"sleet":o="img/flurries.jpg",r=n.flurries;break;case"chancesnow":case"snow":o="img/snow.jpg",r=n.snow;break;case"chancetstorms":case"tstorms":o="img/storm.jpg",r=n.storm;break;case"fog":o="img/fog.jpg",r=n.fog;break;case"hazy":o="img/hazy.jpg",r=n.hazy;break;case"chancerain":case"rain":o="img/rain.jpg",r=n.rain;break;case"clear":case"sunny":o="img/sunny_"+t+".jpg",r=n.sunny[t];break;case"cloudy":"spring"!==t&&"fall"!==t||(t="summer"),o="img/cloudy_"+t+".jpg",r=n.cloudy[t];break;case"mostlycloudy":case"partlysunny":"fall"===t&&(t="spring"),o="img/partlysunny_"+t+".jpg",r=n.partlysunny[t];break;case"mostlysunny":case"partlycloudy":o="img/mostlysunny_"+t+".jpg",r=n.mostlysunny[t]}return{image:o,credit:r}}function displayData(e){function t(t){("keypress"!==t.type||13!==t.keyCode&&32!==t.keyCode)&&"click"!==t.type||(p.innerText=e.temp_c,readCookie("scale")&&eraseCookie("scale"),createCookie("scale","celsius",300),r(g,h))}function o(t){("keypress"!==t.type||13!==t.keyCode&&32!==t.keyCode)&&"click"!==t.type||(p.innerText=e.temp_f,readCookie("scale")&&eraseCookie("scale"),createCookie("scale","fahrenheit",300),r(h,g))}function r(e,r){if("F"===e.innerText)var n=t,c=o,i=d,s=f;else if("C"===e.innerText)var n=o,c=t,i=f,s=d;e.classList.add("vivid"),i.setAttribute("aria-checked","true"),e.removeEventListener("click",c),e.removeEventListener("keypress",c),r.classList.remove("vivid"),s.setAttribute("aria-checked","false"),r.addEventListener("click",n),r.addEventListener("keypress",n)}var n=document.querySelector("body"),c=document.querySelector(".main"),i=document.querySelector(".about"),s=document.querySelector(".about__button"),a=document.querySelector(".about__button--close-modal"),l=document.querySelector(".geo-details__date"),u=document.querySelector(".geo-details__time"),m=document.querySelector(".geo-details__place"),p=document.querySelector(".weather__temp"),h=document.querySelector(".label__item--fahrenheit"),g=document.querySelector(".label__item--celsius"),d=document.querySelector(".radio__item--fahrenheit"),f=document.querySelector(".radio__item--celsius"),y=document.querySelector(".copyright"),k=document.querySelector(".copyright__text"),C=readCookie("scale");l.innerText=e.currDate,u.innerText=e.currTime,m.innerText=e.place,p.innerText="celsius"===C?e.temp_c:e.temp_f;var b=void 0;e.currMonth<3||12===e.currMonth?b="north"===e.hemisphere?"winter":"summer":3<=e.currMonth&&e.currMonth<6?b="north"===e.hemisphere?"spring":"fall":6<=e.currMonth&&e.currMonth<9?b="north"===e.hemisphere?"summer":"winter":9<=e.currMonth&&e.currMonth<12&&(b="north"===e.hemisphere?"fall":"spring");var L=getWeatherImage(e.conditions,b),v=getWeatherColor(e.temp_c);document.documentElement.style.setProperty("--bg-color",v.main),document.documentElement.style.setProperty("--text-color",v.support),c.style.color=v.support,c.style.backgroundColor=v.main,i.style.color=v.support,i.style.backgroundColor=v.main,i.style.borderColor=v.support,s.style.color=v.support,s.style.backgroundColor=v.main,s.style.borderColor=v.support,a.style.color=v.main,a.style.backgroundColor=v.support,a.style.borderColor=v.main,y.style.backgroundColor=v.main,k.style.color=v.support,n.style.backgroundImage="url('"+L.image+"')",k.innerHTML="<p>Photo by <a href='"+L.credit.URL+"'>"+L.credit.author+"</a>, <a href='"+L.credit.licenseURL+"'>"+L.credit.license+"</a>.</p>","celsius"===C?r(g,h):r(h,g)}function getWeatherForPosition(e){var t="https://api.wunderground.com/api/c29706cb930a70b9/conditions/q/"+e+".json";fetch||alert("fetch() unavailable"),fetch(t).then(function(e){if(e.ok)return e.json();throw new Error}).then(function(t){var o=t.current_observation,r=o.display_location,n=r.city+", "+("US"===r.country?r.state:r.state_name)+("US"===r.country?", "+r.country:""),c=o.local_epoch,i=new Date(0);i.setUTCSeconds(c);var s={weekday:"long"},a={month:"long",day:"numeric"},l={hour:"numeric",minute:"numeric"},u=i.toLocaleDateString(void 0,s),m=i.toLocaleDateString(void 0,a),p=i.toLocaleTimeString(void 0,l),h=i.getMonth()+1,g=o.weather,d=o.temperature_string,f=o.temp_c,y=o.temp_f,k=o.feelslike_string,C=o.feelslike_c,b=o.feelslike_f,L=o.icon;return{place:n,hemisphere:e.split(",")[0]>0?"north":"south",currDay:u,currDate:m,currTime:p,currMonth:h,sky:g,temp:d,temp_f:y,temp_c:f,tempFeels:k,tempFeelsF:b,tempFeelsC:C,conditions:L}}).then(function(e){return displayData(e)}).catch(function(e){return console.log("Error while retrieving weather data - "+e.msg)})}function getDataFromResource(e,t){switch(t){case"freegeoip.net":case"ipapi.co":return e.latitude+","+e.longitude;case"ipinfo.io":return e.loc;case"api.ipify.org":return e.ip;case"geoip.nekudo.com":return e.location.latitude+","+e.location.longitude;default:return}}function oneSuccess(e){return Promise.all(e.map(function(e){return e.then(function(e){return Promise.reject(e)},function(e){return Promise.resolve(e)})})).then(function(e){return Promise.reject(e)},function(e){return Promise.resolve(e)})}function getLocationByIP(){oneSuccess([fetch("https://freegeoip.net/json/").then(function(e){if(e.ok)return e.json();throw new Error}).then(function(e){return getDataFromResource(e,"freegeoip.net")}),fetch("https://ipapi.co/json/").then(function(e){if(e.ok)return e.json();throw new Error}).then(function(e){return getDataFromResource(e,"ipapi.co")}),fetch("https://ipinfo.io/json").then(function(e){if(e.ok)return e.json();throw new Error}).then(function(e){return getDataFromResource(e,"ipinfo.io")}),fetch("https://api.ipify.org/?format=json").then(function(e){if(e.ok)return e.json();throw new Error}).then(function(e){return getDataFromResource(e,"api.ipify.org")}).then(function(e){return fetch("https://geoip.nekudo.com/api/"+e.ip)}).then(function(e){if(e.ok)return e.json();throw new Error}).then(function(e){return getDataFromResource(e,"geoip.nekudo.com")})]).then(function(e){console.log(e),getWeatherForPosition(e)})}function geoLocFail(e){var t="";switch(e){case 1:t="User denied the request for Geolocation.";break;case 2:t="Location information is unavailable.";break;case 3:t="The request to get user location timed out.";break;default:t=e.message}console.warn("Error: "+t),getLocationByIP()}function getLocation(){if(navigator.geolocation){var e=setTimeout(function(){geoLocFail(new Error({code:3}))},2e3);navigator.geolocation.getCurrentPosition(function(t){clearTimeout(e),getWeatherForPosition(t.coords.latitude+","+t.coords.longitude)},function(t){clearTimeout(e),geoLocFail(t)},{timeout:2e3,maximumAge:6e5,enableHighAccuracy:!1})}else geoLocFail(new Error({code:-999,message:"An unknown Geolocation error occurred"}))}getLocation();var aboutBtn=document.querySelector(".about__button");aboutBtn.addEventListener("click",function(){document.querySelector(".about").classList.toggle("closed")});var aboutCloseBtn=document.querySelector(".about__button--close-modal");aboutCloseBtn.addEventListener("click",function(){document.querySelector(".about").classList.toggle("closed")});
//# sourceMappingURL=script.js.map
