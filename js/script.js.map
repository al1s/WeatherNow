{"version":3,"sources":["script.js"],"names":["createCookie","name","value","days","date","getTime","toGMTString","setTime","document","expires","readCookie","replace","exec","eraseCookie","cookie","getWeatherColor","colors","temp_c","storm","main","support","getWeatherImage","conditions","seasonYear","backgroundImage","credit","credits","flurries","author","license","licenseURL","URL","hazy","snow","rain","sunny","winter","spring","summer","fall","cloudy","partlysunny","mostlysunny","displayData","bodyElm","mainElm","querySelector","aboutElm","aboutBtnElm","aboutCloseBtnElm","dateElm","timeElm","placeElm","tempElm","tempFScaleLabelElm","tempCScaleLabelElm","tempFScaleInputElm","tempCScaleInputElm","copyrightElm","copyrightTextElm","userScale","innerText","data","image","inputUncheckedElm","setAttribute","addEventListener","btn_released","addHandler","e","keyCode","type","getWeatherForPosition","pos","httpAddr","resp","Error","current_observation","loc","display_location","toggleButtonsState","country","dayOptions","weekday","dateOptions","month","cScaleClickHandler","day","fScaleClickHandler","inputCheckedElm","timeOptions","hour","btn_pressed","minute","removeHandler","currDay","toLocaleDateString","currDate","obz","add","temperature_string","temp_f","tempFeelsC","feelslike_c","feelslike_f","hemisphere","currMonth","bgImage","weatherColors","style","setProperty","backgroundColor","borderColor","color","innerHTML","removeEventListener","sky","alert","tempFeels","tempFeelsF","then","place","city","getDataFromResource","resource","state_name","time","local_epoch","d","latitude","setUTCSeconds","undefined","currTime","toLocaleTimeString","getMonth","weather","oneSuccess","promises","Promise","p","reject","val","resolve","err","icon","split","fetchResources","fetch","catch","console","ok","error","msg","longitude","location","geoLocFail","all","errors","getLocationByIP","json","getLocation","navigator","geolocation","location_timeout","clearTimeout","ip","maximumAge","log","aboutBtn","aboutMsg","classList","aboutCloseBtn","toggle","setTimeout","code","getCurrentPosition","position","coords","timeout","enableHighAccuracy","message"],"mappings":"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","file":"script.js","sourcesContent":["/* eslint arrow-parens: 0 */\n/* eslint no-var: 0 */\n\nfunction createCookie(name, value, days) {\n  if (days) {\n    var date = new Date();\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n    var expires = '; expires=' + date.toGMTString();\n  } else var expires = '';\n  document.cookie = name + '=' + value + expires + '; path=/';\n}\n\n// here is the function from https://stackoverflow.com/a/5882352\nfunction readCookie(name) {\n  return (\n    (name = new RegExp(\n      '(?:^|;\\\\s*)' +\n        ('' + name).replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&') +\n        '=([^;]*)',\n    ).exec(document.cookie)) && name[1]\n  );\n}\n\nfunction eraseCookie(name) {\n  createCookie(name, '', -1);\n}\n\nfunction getWeatherColor(temp_c) {\n  let colors = {};\n  if (30 <= temp_c) colors = { main: '#A50021', support: '#fff' };\n  else if (25 <= temp_c && temp_c < 30)\n    colors = { main: '#D82632', support: '#fff' };\n  else if (20 <= temp_c && temp_c < 25)\n    colors = { main: '#F76D5E', support: '#242442' };\n  else if (15 <= temp_c && temp_c < 20)\n    //support: #fff - bad accessibility\n    colors = { main: '#FFAD72', support: '#00365c' };\n  else if (10 <= temp_c && temp_c < 15)\n    colors = { main: '#FFE099', support: '#001F66' };\n  else if (5 <= temp_c && temp_c < 10)\n    colors = { main: '#FFFFBF', support: '#000040' };\n  else if (0 <= temp_c && temp_c < 5)\n    colors = { main: '#E0FFFF', support: '#1F0000' };\n  else if (-5 <= temp_c && temp_c < 0)\n    colors = { main: '#AAF7FF', support: '#1F0000' };\n  else if (-10 <= temp_c && temp_c < -5)\n    colors = { main: '#72D8FF', support: '#1F0000' };\n  else if (-15 <= temp_c && temp_c < -10)\n    colors = { main: '#3FA0FF', support: '#1F0000' };\n  else if (-20 <= temp_c && temp_c < -15)\n    colors = { main: '#264CFF', support: '#fcc' };\n  return colors;\n}\n\nfunction getWeatherImage(conditions, seasonYear) {\n  // weather determitants:\n  // - conditions as returned by weather API\n  // - current local season of the year;\n  // - latitude (north or south hemisphere);\n  let backgroundImage;\n  let credit = {};\n  let credits = {\n    flurries: {\n      author: 'Frida',\n      URL: 'https://flic.kr/p/k7zUGc',\n      license: 'CC BY-NC 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by-nc/2.0',\n    },\n    snow: {\n      author: 'FHKE',\n      URL: 'https://flic.kr/p/7AVLQR',\n      license: 'CC BY-SA 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by-sa/2.0',\n    },\n    storm: {\n      author: 'Kuster & Wildhaber Photography',\n      URL: 'https://flic.kr/p/cESNRS',\n      license: 'CC BY-ND 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by-nd/2.0',\n    },\n    fog: {\n      author: 'Martin Fisch',\n      URL: 'https://flic.kr/p/dkqP1t',\n      license: 'CC BY-SA 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by-sa/2.0',\n    },\n    hazy: {\n      author: 'pnwbot',\n      URL: 'https://flic.kr/p/pusoD1',\n      license: 'CC BY-NC-SA 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by-nc-sa/2.0',\n    },\n    rain: {\n      author: 'Gabriele Diwald',\n      URL: 'https://flic.kr/p/dfkuTL',\n      license: 'CC BY 2.0',\n      licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n    },\n    sunny: {\n      winter: {\n        author: 'bfatphoto',\n        URL: 'https://flic.kr/p/RHwJiG',\n        license: 'CC BY-NC-ND 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-nc-nd/2.0',\n      },\n      spring: {\n        author: 'Stanley Zimny',\n        URL: 'https://flic.kr/p/oavqBk',\n        license: 'CC BY-NC 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-nc/2.0',\n      },\n      summer: {\n        author: 'Chris',\n        URL: 'https://flic.kr/p/fgLTUU',\n        license: 'CC BY-SA 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-sa/2.0',\n      },\n      fall: {\n        author: 'Jorge Franganillo',\n        URL: 'https://flic.kr/p/i28UqP',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n    },\n    cloudy: {\n      summer: {\n        author: 'Kay Gaensler',\n        URL: 'https://flic.kr/p/cScQxy',\n        license: 'CC BY-NC-SA 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-nc-sa/2.0',\n      },\n      winter: {\n        author: 'Peter Toporowski',\n        URL: 'https://flic.kr/p/RDW4Z1',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n    },\n    partlysunny: {\n      winter: {\n        author: 'Gérald Laik',\n        URL: 'https://flic.kr/p/RzuZS7',\n        license: 'CC BY-NC-ND 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-nc-nd/2.0',\n      },\n      spring: {\n        author: 'Graham Haley',\n        URL: 'https://flic.kr/p/UtjTDm',\n        license: 'CC BY-SA 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-sa/2.0',\n      },\n      summer: {\n        author: 'Nicolas Raymond',\n        URL:\n          'http://freestock.ca/skies_clouds_g61-coastal_clouds__hdr_p1879.html',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n    },\n    mostlysunny: {\n      winter: {\n        author: 'Adam Tas',\n        URL: 'https://flic.kr/p/R33zcf',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n      spring: {\n        author: 'Jim Choate',\n        URL: 'https://flic.kr/p/SbmJj2',\n        license: 'CC BY-NC-ND 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by-nc-nd/2.0',\n      },\n      summer: {\n        author: 'Nicolas Raymond',\n        URL:\n          'http://freestock.ca/canada_g92-beaver_brook_scenery__hdr_p804.html',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n      fall: {\n        author: 'Belinda Church',\n        URL: 'https://flic.kr/p/qb4cbs',\n        license: 'CC BY 2.0',\n        licenseURL: 'https://creativecommons.org/licenses/by/2.0',\n      },\n    },\n  };\n  switch (conditions) {\n    case 'chanceflurries':\n    case 'chancesleet':\n    case 'flurries':\n    case 'sleet':\n      backgroundImage = `img/flurries.jpg`;\n      credit = credits.flurries;\n      break;\n    case 'chancesnow':\n    case 'snow':\n      backgroundImage = `img/snow.jpg`;\n      credit = credits.snow;\n      break;\n    case 'chancetstorms':\n    case 'tstorms':\n      backgroundImage = `img/storm.jpg`;\n      credit = credits.storm;\n      break;\n    case 'fog':\n      backgroundImage = `img/fog.jpg`;\n      credit = credits.fog;\n      break;\n    case 'hazy':\n      backgroundImage = `img/hazy.jpg`;\n      credit = credits.hazy;\n      break;\n    case 'chancerain':\n    case 'rain':\n      backgroundImage = `img/rain.jpg`;\n      credit = credits.rain;\n      break;\n    case 'clear':\n    case 'sunny':\n      backgroundImage = `img/sunny_${seasonYear}.jpg`;\n      credit = credits.sunny[seasonYear];\n      break;\n    case 'cloudy':\n      if (seasonYear === 'spring' || seasonYear === 'fall')\n        seasonYear = 'summer';\n      backgroundImage = `img/cloudy_${seasonYear}.jpg`;\n      credit = credits.cloudy[seasonYear];\n      break;\n    case 'mostlycloudy':\n    case 'partlysunny':\n      if (seasonYear === 'fall') seasonYear = 'spring';\n      backgroundImage = `img/partlysunny_${seasonYear}.jpg`;\n      credit = credits.partlysunny[seasonYear];\n      break;\n    case 'mostlysunny':\n    case 'partlycloudy':\n      backgroundImage = `img/mostlysunny_${seasonYear}.jpg`;\n      credit = credits.mostlysunny[seasonYear];\n      break;\n  }\n  return { image: backgroundImage, credit };\n}\n\nfunction displayData(data) {\n  const bodyElm = document.querySelector('body');\n  const mainElm = document.querySelector('.main');\n  const aboutElm = document.querySelector('.about');\n  const aboutBtnElm = document.querySelector('.about__button');\n  const aboutCloseBtnElm = document.querySelector(\n    '.about__button--close-modal',\n  );\n  const dateElm = document.querySelector('.geo-details__date');\n  const timeElm = document.querySelector('.geo-details__time');\n  const placeElm = document.querySelector('.geo-details__place');\n  const tempElm = document.querySelector('.weather__temp');\n  const tempFScaleLabelElm = document.querySelector('.label__item--fahrenheit');\n  const tempCScaleLabelElm = document.querySelector('.label__item--celsius');\n  const tempFScaleInputElm = document.querySelector('.radio__item--fahrenheit');\n  const tempCScaleInputElm = document.querySelector('.radio__item--celsius');\n  const copyrightElm = document.querySelector('.copyright');\n  const copyrightTextElm = document.querySelector('.copyright__text');\n  // const copyrightSignElm = document.querySelector('.copyright__sign');\n  const userScale = readCookie('scale');\n\n  dateElm.innerText = data.currDate;\n  timeElm.innerText = data.currTime;\n  placeElm.innerText = data.place;\n  tempElm.innerText = userScale === 'celsius' ? data.temp_c : data.temp_f;\n\n  // set visual appearance of the page\n  let seasonYear;\n  if (data.currMonth < 3 || data.currMonth === 12) {\n    seasonYear = data.hemisphere === 'north' ? 'winter' : 'summer';\n  } else if (3 <= data.currMonth && data.currMonth < 6) {\n    seasonYear = data.hemisphere === 'north' ? 'spring' : 'fall';\n  } else if (6 <= data.currMonth && data.currMonth < 9) {\n    seasonYear = data.hemisphere === 'north' ? 'summer' : 'winter';\n  } else if (9 <= data.currMonth && data.currMonth < 12) {\n    seasonYear = data.hemisphere === 'north' ? 'fall' : 'spring';\n  }\n  const bgImage = getWeatherImage(data.conditions, seasonYear);\n  // all inner visual appearance decisions are based on celsius scale;\n  const weatherColors = getWeatherColor(data.temp_c);\n  document.documentElement.style.setProperty('--bg-color', weatherColors.main);\n  document.documentElement.style.setProperty(\n    '--text-color',\n    weatherColors.support,\n  );\n  // unable to set svg properties through css variables, so work directly\n  // copyrightSignElm.style.color = weatherColors.main;\n  // copyrightSignElm.style.fill = weatherColors.support;\n  // unable to rule colors in old Safari with css variables, so work directly\n  mainElm.style.color = weatherColors.support;\n  mainElm.style.backgroundColor = weatherColors.main;\n  aboutElm.style.color = weatherColors.support;\n  aboutElm.style.backgroundColor = weatherColors.main;\n  aboutElm.style.borderColor = weatherColors.support;\n  aboutBtnElm.style.color = weatherColors.support;\n  aboutBtnElm.style.backgroundColor = weatherColors.main;\n  aboutBtnElm.style.borderColor = weatherColors.support;\n  aboutCloseBtnElm.style.color = weatherColors.main;\n  aboutCloseBtnElm.style.backgroundColor = weatherColors.support;\n  aboutCloseBtnElm.style.borderColor = weatherColors.main;\n  copyrightElm.style.backgroundColor = weatherColors.main;\n  copyrightTextElm.style.color = weatherColors.support;\n\n  bodyElm.style.backgroundImage = `url('${bgImage.image}')`;\n  copyrightTextElm.innerHTML = `<p>Photo by <a href='${bgImage.credit.URL}'>${\n    bgImage.credit.author\n  }</a>, <a href='${bgImage.credit.licenseURL}'>${\n    bgImage.credit.license\n  }</a>.</p>`;\n\n  // set scale and switch handlers\n  if (userScale === 'celsius')\n    toggleButtonsState(tempCScaleLabelElm, tempFScaleLabelElm);\n  else toggleButtonsState(tempFScaleLabelElm, tempCScaleLabelElm);\n\n  function cScaleClickHandler(e) {\n    if (\n      (e.type === 'keypress' && (e.keyCode === 13 || e.keyCode === 32)) ||\n      e.type === 'click'\n    ) {\n      tempElm.innerText = data.temp_c;\n      if (readCookie('scale')) eraseCookie('scale');\n      createCookie('scale', 'celsius', 300);\n      toggleButtonsState(tempCScaleLabelElm, tempFScaleLabelElm);\n    }\n  }\n\n  function fScaleClickHandler(e) {\n    if (\n      (e.type === 'keypress' && (e.keyCode === 13 || e.keyCode === 32)) ||\n      e.type === 'click'\n    ) {\n      tempElm.innerText = data.temp_f;\n      if (readCookie('scale')) eraseCookie('scale');\n      createCookie('scale', 'fahrenheit', 300);\n      toggleButtonsState(tempFScaleLabelElm, tempCScaleLabelElm);\n    }\n  }\n\n  function toggleButtonsState(btn_pressed, btn_released) {\n    if (btn_pressed.innerText === 'F') {\n      var addHandler = cScaleClickHandler;\n      var removeHandler = fScaleClickHandler;\n      var inputCheckedElm = tempFScaleInputElm;\n      var inputUncheckedElm = tempCScaleInputElm;\n    } else if (btn_pressed.innerText === 'C') {\n      var addHandler = fScaleClickHandler;\n      var removeHandler = cScaleClickHandler;\n      var inputCheckedElm = tempCScaleInputElm;\n      var inputUncheckedElm = tempFScaleInputElm;\n    }\n\n    btn_pressed.classList.add('vivid');\n    inputCheckedElm.setAttribute('aria-checked', 'true');\n    btn_pressed.removeEventListener('click', removeHandler);\n    btn_pressed.removeEventListener('keypress', removeHandler);\n\n    btn_released.classList.remove('vivid');\n    inputUncheckedElm.setAttribute('aria-checked', 'false');\n    btn_released.addEventListener('click', addHandler);\n    btn_released.addEventListener('keypress', addHandler);\n  }\n}\n\nfunction getWeatherForPosition(pos) {\n  // const httpAddr = `https://api.wunderground.com/api/c29706cb930a70b9/conditions/q/${pos.coords.latitude},${pos.coords.longitude}.json`;//Kenmore,WA\n  const httpAddr = `https://api.wunderground.com/api/c29706cb930a70b9/conditions/q/${pos}.json`;\n  if (!fetch) alert('fetch() unavailable');\n\n  fetch(httpAddr)\n    .then(resp => {\n      if (resp.ok) {\n        return resp.json();\n      }\n      throw new Error();\n    })\n    .then(data => {\n      const obz = data.current_observation;\n      const loc = obz.display_location;\n\n      const place =\n        loc.city +\n        ', ' +\n        (loc.country === 'US' ? loc.state : loc.state_name) +\n        (loc.country === 'US' ? ', ' + loc.country : '');\n      const time = obz.local_epoch;\n      let d = new Date(0);\n      d.setUTCSeconds(time);\n      const dayOptions = { weekday: 'long' };\n      const dateOptions = {\n        month: 'long',\n        day: 'numeric',\n      };\n      const timeOptions = {\n        hour: 'numeric',\n        minute: 'numeric',\n      };\n      const currDay = d.toLocaleDateString(undefined, dayOptions);\n      const currDate = d.toLocaleDateString(undefined, dateOptions);\n      const currTime = d.toLocaleTimeString(undefined, timeOptions);\n      const currMonth = d.getMonth() + 1;\n      const sky = obz.weather;\n      const temp = obz.temperature_string;\n      const temp_c = obz.temp_c;\n      const temp_f = obz.temp_f;\n      const tempFeels = obz.feelslike_string;\n      const tempFeelsC = obz.feelslike_c;\n      const tempFeelsF = obz.feelslike_f;\n      const conditions = obz.icon;\n      return {\n        place,\n        hemisphere: pos.split(',')[0] > 0 ? 'north' : 'south',\n        currDay,\n        currDate,\n        currTime,\n        currMonth,\n        sky,\n        temp,\n        temp_f,\n        temp_c,\n        tempFeels,\n        tempFeelsF,\n        tempFeelsC,\n        conditions,\n      };\n    })\n    .then(data => displayData(data))\n    .catch(error =>\n      console.log(`Error while retrieving weather data - ${error.msg}`),\n    );\n}\n\nfunction getDataFromResource(data, resource) {\n  switch (resource) {\n    case 'freegeoip.net':\n      return `${data.latitude},${data.longitude}`;\n    case 'ipapi.co':\n      return `${data.latitude},${data.longitude}`;\n    case 'ipinfo.io':\n      return data.loc;\n    case 'api.ipify.org':\n      return data.ip;\n    case 'geoip.nekudo.com':\n      return `${data.location.latitude},${data.location.longitude}`;\n    default:\n      return undefined;\n  }\n}\n\n// brilliant way to resolve promises array with first successful resolution\n// from - https://stackoverflow.com/a/37235274/2255031\nfunction oneSuccess(promises) {\n  return Promise.all(\n    promises.map(p => {\n      return p.then(val => Promise.reject(val), err => Promise.resolve(err));\n    }),\n  ).then(errors => Promise.reject(errors), val => Promise.resolve(val));\n}\n\nfunction getLocationByIP() {\n  var fetchResources = [\n    fetch('https://freegeoip.net/json/')\n      .then(resp => {\n        if (resp.ok) return resp.json();\n        throw new Error();\n      })\n      .then(data => getDataFromResource(data, 'freegeoip.net')),\n    fetch('https://ipapi.co/json/')\n      .then(resp => {\n        if (resp.ok) return resp.json();\n        throw new Error();\n      })\n      .then(data => getDataFromResource(data, 'ipapi.co')),\n    fetch('https://ipinfo.io/json')\n      .then(resp => {\n        if (resp.ok) return resp.json();\n        throw new Error();\n      })\n      .then(data => getDataFromResource(data, 'ipinfo.io')),\n    fetch('https://api.ipify.org/?format=json')\n      .then(resp => {\n        if (resp.ok) return resp.json();\n        throw new Error();\n      })\n      .then(data => getDataFromResource(data, 'api.ipify.org'))\n      .then(data => fetch(`https://geoip.nekudo.com/api/${data.ip}`))\n      .then(resp => {\n        if (resp.ok) return resp.json();\n        throw new Error();\n      })\n      .then(data => getDataFromResource(data, 'geoip.nekudo.com')),\n  ];\n  oneSuccess(fetchResources).then(data => {\n    console.log(data);\n    getWeatherForPosition(data);\n  });\n}\n\nfunction geoLocFail(error) {\n  let msg = '';\n  switch (error) {\n    case 1: //error.PERMISSION_DENIED:\n      msg = 'User denied the request for Geolocation.';\n      break;\n    case 2: //error.POSITION_UNAVAILABLE:\n      msg = 'Location information is unavailable.';\n      break;\n    case 3: //error.TIMEOUT:\n      msg = 'The request to get user location timed out.';\n      break;\n    default:\n      msg = error.message;\n      break;\n  }\n  console.warn(`Error: ${msg}`);\n  getLocationByIP(); //fallback to get alternative user location;\n}\n\nfunction getLocation() {\n  if (navigator.geolocation) {\n    const location_timeout = setTimeout(function() {\n      let err = new Error({ code: 3 });\n      geoLocFail(err);\n    }, 0.2 * 10 * 1000); //0.2 is for 2 seconds timeout\n    navigator.geolocation.getCurrentPosition(\n      function(position) {\n        clearTimeout(location_timeout);\n        //console.log('successfully get geoposition');\n        getWeatherForPosition(\n          position.coords.latitude + ',' + position.coords.longitude,\n        );\n      },\n      function(err) {\n        clearTimeout(location_timeout);\n        //console.log('failed to get geoposition');\n        geoLocFail(err);\n      },\n      {\n        timeout: 0.2 * 10 * 1000,\n        maximumAge: 60 * 10 * 1000,\n        enableHighAccuracy: false,\n      },\n    );\n  } else {\n    let err = new Error({\n      code: -999,\n      message: 'An unknown Geolocation error occurred',\n    });\n    geoLocFail(err);\n  }\n}\n\n// main\ngetLocation();\n\nconst aboutBtn = document.querySelector('.about__button');\naboutBtn.addEventListener('click', function() {\n  const aboutMsg = document.querySelector('.about');\n  aboutMsg.classList.toggle('closed');\n});\n\nconst aboutCloseBtn = document.querySelector('.about__button--close-modal');\naboutCloseBtn.addEventListener('click', function() {\n  const aboutMsg = document.querySelector('.about');\n  aboutMsg.classList.toggle('closed');\n});\n"],"sourceRoot":"/source/"}